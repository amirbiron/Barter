# 🔔 פיצ'ר התראות על מילות מפתח

## תיאור
פיצ'ר חדש המאפשר למשתמשים להגדיר מילות מפתח ולקבל התראה אוטומטית כאשר מתפרסמת מודעה חדשה המכילה את המילים הללו.

## איך זה עובד?

### 1. גישה לתפריט התראות
- לחץ על כפתור **"🔔 התראות"** בתפריט הראשי

### 2. אפשרויות זמינות
- **➕ הוסף מילת מפתח** - הוספת מילה או ביטוי חדש למעקב
- **📋 הצג מילות מפתח** - צפייה בכל המילות שהגדרת
- **🗑️ מחק מילת מפתח** - הסרת מילים ספציפיות
- **🔄 החלף את כל המילות** - החלפה מלאה של כל המילות בבת אחת

### 3. הגדרת מילות מפתח
- ניתן להגדיר מילים בודדות: "עיצוב", "תכנות", "צילום"
- ניתן להגדיר ביטויים: "עיצוב גרפי", "פיתוח אתרים"
- המערכת אינה רגישה לאותיות גדולות/קטנות
- כל מילה נשמרת בנפרד ומנוהלת באופן עצמאי

### 4. קבלת התראות
כאשר מתפרסמת מודעה חדשה:
- המערכת בודקת אוטומטית אם היא מכילה את מילות המפתח שלך
- אם נמצאה התאמה, תקבל התראה מיידית עם:
  - המילות שנמצאו
  - כותרת המודעה
  - תקציר התיאור
  - כפתורים לצפייה ושמירה מהירה

### 5. ניהול חכם
- לא תקבל התראות על מודעות שאתה פרסמת
- לא תקבל התראה כפולה על אותה מודעה
- ההתראות נשלחות רק על מודעות ציבוריות

## דוגמאות לשימוש

### דוגמה 1: מעצב גרפי מחפש פרויקטים
מילות מפתח: "עיצוב", "לוגו", "באנר", "פוטושופ", "illustrator"

### דוגמה 2: מתכנת מחפש עבודות
מילות מפתח: "תכנות", "React", "Node.js", "Python", "אתר", "אפליקציה"

### דוגמה 3: צלם מחפש הזדמנויות
מילות מפתח: "צילום", "אירוע", "חתונה", "סטילס", "עריכת תמונות"

## טבלאות במסד הנתונים

### keyword_alerts
```sql
CREATE TABLE keyword_alerts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    keyword TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    is_active INTEGER DEFAULT 1,
    FOREIGN KEY (user_id) REFERENCES users (user_id),
    UNIQUE(user_id, keyword)
)
```

### sent_alerts
```sql
CREATE TABLE sent_alerts (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    user_id INTEGER NOT NULL,
    post_id INTEGER NOT NULL,
    keyword TEXT NOT NULL,
    sent_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (user_id),
    FOREIGN KEY (post_id) REFERENCES posts (id) ON DELETE CASCADE,
    UNIQUE(user_id, post_id, keyword)
)
```

## פונקציות חדשות ב-database.js
- `addKeywordAlert(userId, keyword)` - הוספת מילת מפתח
- `removeKeywordAlert(userId, keyword)` - הסרת מילת מפתח
- `getUserKeywords(userId)` - קבלת כל מילות המפתח של משתמש
- `checkPostForKeywords(postId, postTitle, postDescription)` - בדיקת התאמות
- `recordSentAlert(userId, postId, keyword)` - רישום התראה שנשלחה
- `setUserKeywords(userId, keywords)` - החלפת כל מילות המפתח
- `cleanOldAlerts()` - ניקוי התראות ישנות (אופציונלי)

## שינויים בקבצים קיימים

### app.js
- נוספו פונקציות לטיפול בהתראות
- נוספה קריאה ל-`checkAndSendAlerts` אחרי יצירת מודעה חדשה
- נוסף טיפול ב-callback queries של התראות
- נוסף טיפול במצבי משתמש של התראות

### keyboard.js
- נוסף כפתור "🔔 התראות" לתפריט הראשי
- נוספו תפריטים לניהול התראות
- נוספו כפתורי ניהול מילות מפתח

### database.js
- נוספו טבלאות חדשות למילות מפתח והתראות
- נוספו פונקציות לניהול מילות מפתח
- נוספו אינדקסים לשיפור ביצועים

## יתרונות הפיצ'ר
✅ חיסכון בזמן - לא צריך לחפש ידנית  
✅ התראות מיידיות - מקבלים עדכון ברגע הפרסום  
✅ התאמה מדויקת - רק מודעות רלוונטיות  
✅ ניהול פשוט - ממשק נוח וידידותי  
✅ ללא הגבלה - ניתן להגדיר כמה מילות מפתח שרוצים  

## הערות טכניות
- המילות נשמרות באותיות קטנות לצורך השוואה אחידה
- הבדיקה מתבצעת גם בכותרת וגם בתיאור המודעה
- ההתראות נשלחות באופן אסינכרוני כדי לא לעכב את פרסום המודעה
- יש מנגנון למניעת כפילויות בהתראות